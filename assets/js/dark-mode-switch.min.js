// 按钮触发的切换主题方法
function changeTheme() {
    var link = document.getElementsByTagName("link")[0];
    //判断目前页面上的link的id是哪个，如果是默认主题的话，就传送新主题的id给change()函数，否则亦然
    if (link.id === "default-theme") {
        change("dark-theme");
    } else {
        change("default-theme");
    }
}

//真正的切换主题方法
function change(themeName){
    var link = document.getElementsByTagName("link")[0];

    if(themeName === "default-theme"){
        link.id = "default-theme";
        link.href = '{{site.baseurl}}/assets/css/bootstrap.min.css';

        //记录新的主题到cookies，这里一定要写上path=/，否则就不是修改cookies而是在不同页面创建cookies了
        document.cookie = "themeCookies=default-theme;path=/";
    }else if(themeName === "dark-theme"){
        link.id = "dark-theme";
        link.href = '{{site.baseurl}}/assets/css/bootstrap-dark.min.css';
        document.cookie = "themeCookies=dark-theme;path=/";
    }
}

// 获取cookie中当前主题的id，没有则返回默认的default-theme
function getThemeName() {
    var themeCookies = "themeCookies=";
    var allCookies = document.cookie.split(';');
    for(var i=0; i<allCookies.length; i++){
        var c = allCookies[i].trim();
        if(c.indexOf(themeCookies) === 0)
            return c.substring(themeCookies.length, c.length);
    }
    return "default-theme";
}
  // 让网页每次进入时都先检查一下主题是哪个$(document).ready(function () {
    change(getThemeName());
});
